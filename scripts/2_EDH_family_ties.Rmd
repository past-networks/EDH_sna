---
title: "EDH people: family ties on inscriptions"
author: 
- Petra Hermankova^[Aarhus University, Denmark, https://orcid.org/0000-0002-6349-0540]
date: "`r format(Sys.Date())`"
output:
  html_document:
    theme: united
    toc: yes
    toc_float: true
    number_sections: true
    toc_depth: 3
    df_print: paged
---

_Purpose of this script is to explore family ties on inscriptions from the [Epigraphic Database Heidelberg (**EDH**) dataset](https://zenodo.org/record/4888168/)  for the purpose of the SNA within the **Past Social Network Project**, Aarhus University._


**WARNING!** The following code was designed for the 2021 version. As some attributes in the 2022 version changed, you may have to alter the code below where necessary.


# Initial setup

```{r setup, echo=TRUE, message=FALSE, warning = FALSE}

knitr::opts_chunk$set(message = FALSE, warning = FALSE)

library(tidyverse)
library(jsonlite)
library(igraph)
```


```{r loading data}
# 2021
EDH_people <- read_csv("../data/EDH_people_2021.csv", progress = T)

# 2022
# not implemented yet
```


# Exploring family ties

```{r}
# test with the first 20 people in the dataset
small <- head(EDH_people, 20)

small %>% 
  filter(!is.na(nomen_clean)) %>% 
  select(name, nomen_clean) -> sample

edges <- as.matrix(sample)
g <- graph_from_edgelist(edges, directed = FALSE)
plot(g)
```



```{r}
# people on inscriptions from Pompeii where the inscriptions was created after 30 AD

EDH_people %>% 
  filter(!is.na(nomen_clean)) %>% 
  filter(!is.na(name)) %>% 
  filter(!is.na(not_before)) %>%
  filter(!is.na(not_after)) %>%
  select(name, nomen_clean, findspot_ancient_clean, not_before, not_after) -> EDH_nomen


EDH_nomen_pompeii <- EDH_nomen %>% 
  filter(findspot_ancient_clean == "Pompeii") %>% 
  filter(as.numeric(not_before) > 30)

edges_nomen <- as.matrix(EDH_nomen_pompeii)


f_nomen <- graph(edges_nomen, directed = TRUE)
plot(f_nomen)
```

